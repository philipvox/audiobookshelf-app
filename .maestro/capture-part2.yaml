# =============================================================================
# MAESTRO: Capture Part 2 - Browse, Search, Profile, Player
# =============================================================================

appId: com.secretlibrary.app

---

- launchApp
- waitForAnimationToEnd:
    timeout: 5000

# =============================================================================
# BROWSE TAB
# =============================================================================
- tapOn:
    text: "Browse"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/66-browse-top

- swipe:
    start: "50%,70%"
    end: "50%,30%"
- waitForAnimationToEnd
- takeScreenshot: comprehensive/66-browse-scrolled

- swipe:
    start: "50%,30%"
    end: "50%,70%"
- waitForAnimationToEnd

# =============================================================================
# SEARCH TAB
# =============================================================================
- tapOn:
    text: "Search"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/56-search-empty

# Type a search
- tapOn:
    point: "50%,15%"
- waitForAnimationToEnd
- inputText: "fantasy"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/59-search-results
- hideKeyboard
- back
- waitForAnimationToEnd

# =============================================================================
# PROFILE TAB
# =============================================================================
- tapOn:
    text: "Profile"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/83-profile-top

- swipe:
    start: "50%,70%"
    end: "50%,30%"
- waitForAnimationToEnd
- takeScreenshot: comprehensive/83-profile-scrolled

- swipe:
    start: "50%,30%"
    end: "50%,70%"
- waitForAnimationToEnd

# Downloads
- tapOn:
    text: "Downloads"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/86-downloads
- back
- waitForAnimationToEnd

# Wishlist
- tapOn:
    text: "Wishlist"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/91-wishlist
- back
- waitForAnimationToEnd

# Stats
- tapOn:
    text: "Listening Stats"
    optional: true
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/97-stats
- back
- waitForAnimationToEnd

# Playback Settings
- tapOn:
    text: "Playback"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/104-playback-settings

- swipe:
    start: "50%,70%"
    end: "50%,30%"
- waitForAnimationToEnd
- takeScreenshot: comprehensive/104-playback-scrolled
- back
- waitForAnimationToEnd

# Storage
- tapOn:
    text: "Storage"
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/storage-settings
- back
- waitForAnimationToEnd

# =============================================================================
# PLAYER
# =============================================================================
- tapOn:
    text: "Home"
- waitForAnimationToEnd

# Try to start playback - tap Browse Library button
- tapOn:
    text: "Browse Library"
    optional: true
- waitForAnimationToEnd:
    timeout: 3000

# Go to Library and tap a book to play
- tapOn:
    text: "Library"
- waitForAnimationToEnd

# Tap on first book
- tapOn:
    point: "25%,35%"
- waitForAnimationToEnd:
    timeout: 3000

# Try to play
- tapOn:
    text: "Play"
    optional: true
- tapOn:
    text: "Stream"
    optional: true
- waitForAnimationToEnd:
    timeout: 5000
- takeScreenshot: comprehensive/player-starting

# Open full player if mini player is showing
- tapOn:
    point: "50%,92%"
    optional: true
- waitForAnimationToEnd:
    timeout: 3000
- takeScreenshot: comprehensive/11-player-full

# =============================================================================
# FINAL
# =============================================================================
- tapOn:
    text: "Home"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: comprehensive/99-final

- evalScript: |
    console.log("Part 2 capture complete!");
